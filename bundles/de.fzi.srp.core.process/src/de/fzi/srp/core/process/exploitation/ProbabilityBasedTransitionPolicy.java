package de.fzi.srp.core.process.exploitation;

import static de.fzi.srp.core.process.util.MarkovianUtil.toSamples;

import java.util.Set;

import de.fzi.srp.core.model.markovmodel.markoventity.State;
import de.fzi.srp.core.model.markovmodel.markoventity.Transition;
import de.fzi.srp.core.process.markovian.activity.Policy;
import de.fzi.srp.distribution.factory.ProbabilityDistributionFactory;
import de.fzi.srp.distribution.function.ProbabilityMassFunction;

public class ProbabilityBasedTransitionPolicy implements Policy<Transition> {
	
	private final static String POLICY_NAME = "ProbabilityBasedTransitionSelection";
	
	@Override
	public Transition select(State source, Set<Transition> options) {
		ProbabilityMassFunction pmf = ProbabilityDistributionFactory.INSTANCE.pmfOver(toSamples(options));
		return (Transition) pmf.drawSample().getValue();
	}

	@Override
	public String getId() {
		return POLICY_NAME;
	}

}
