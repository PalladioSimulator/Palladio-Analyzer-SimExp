package org.palladiosimulator.simexp.markovian.exploitation;

import static org.palladiosimulator.simexp.markovian.util.MarkovianUtil.toSamples;

import java.util.Set;

import org.palladiosimulator.simexp.distribution.factory.ProbabilityDistributionFactory;
import org.palladiosimulator.simexp.distribution.function.ProbabilityMassFunction;
import org.palladiosimulator.simexp.distribution.function.ProbabilityMassFunction.Sample;
import org.palladiosimulator.simexp.markovian.activity.Policy;
import org.palladiosimulator.simexp.markovian.model.markovmodel.markoventity.State;
import org.palladiosimulator.simexp.markovian.model.markovmodel.markoventity.Transition;

public class ProbabilityBasedTransitionPolicy implements Policy<Transition<Double>> {
	
	private final static String POLICY_NAME = "ProbabilityBasedTransitionSelection";
	
	@Override
	public Transition<Double> select(State<Transition<Double>> source, Set<Transition<Double>> options) {
		ProbabilityMassFunction pmf = ProbabilityDistributionFactory.INSTANCE.pmfOver(toSamples(options));
		Sample drawSample = pmf.drawSample();
		return drawSample.getValue();
	}

	@Override
	public String getId() {
		return POLICY_NAME;
	}

}
