package org.palladiosimulator.simexp.markovian.exploitation;

import static org.palladiosimulator.simexp.markovian.util.MarkovianUtil.toSamples;

import java.util.Set;

import org.palladiosimulator.simexp.markovian.activity.Policy;
import org.palladiosimulator.simexp.markovian.model.markovmodel.markoventity.State;
import org.palladiosimulator.simexp.markovian.model.markovmodel.markoventity.Transition;

import de.fzi.srp.distribution.factory.ProbabilityDistributionFactory;
import de.fzi.srp.distribution.function.ProbabilityMassFunction;

public class ProbabilityBasedTransitionPolicy implements Policy<Transition> {
	
	private final static String POLICY_NAME = "ProbabilityBasedTransitionSelection";
	
	@Override
	public Transition select(State source, Set<Transition> options) {
		ProbabilityMassFunction pmf = ProbabilityDistributionFactory.INSTANCE.pmfOver(toSamples(options));
		return (Transition) pmf.drawSample().getValue();
	}

	@Override
	public String getId() {
		return POLICY_NAME;
	}

}
